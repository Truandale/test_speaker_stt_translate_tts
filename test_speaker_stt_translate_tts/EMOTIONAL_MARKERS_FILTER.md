# üßπ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤ *—Ç–µ–∫—Å—Ç*

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–ª–∞ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã —Ç–∏–ø–∞ `*sigh*` –∏ –ø—Ä–æ–∏–∑–Ω–æ—Å–∏–ª–∞ –∏—Ö –∫–∞–∫ "–∑–≤—ë–∑–¥–æ—á–∫–∞ —Å–∞–π–Ω –∑–≤—ë–∑–¥–æ—á–∫–∞", —á—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ –Ω–µ–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–≤—É—á–∞–Ω–∏–µ.

---

## ‚ú® –†–µ—à–µ–Ω–∏–µ

### **1. –ù–æ–≤—ã–µ —Ç–∏–ø—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≤ AdvancedSpeechFilter.cs**

#### **–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã:**
```csharp
private static readonly string[] EMOTIONAL_MARKERS = {
    "*sigh*", "*laugh*", "*cough*", "*sneeze*", "*yawn*", "*whisper*", "*shout*",
    "*crying*", "*sobbing*", "*giggle*", "*gasp*", "*breath*", "*breathing*"
};
```

#### **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
```csharp
// –õ—é–±–æ–π —Ç–µ–∫—Å—Ç –≤ –∑–≤–µ–∑–¥–æ—á–∫–∞—Ö *—Ç–µ–∫—Å—Ç*
if (lowerText.StartsWith("*") && lowerText.EndsWith("*") && lowerText.Length > 2)
    return true;
```

### **2. –§—É–Ω–∫—Ü–∏–∏ –æ—á–∏—Å—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞**

#### **CleanEmotionalMarkers(string text)**
```csharp
// –£–¥–∞–ª—è–µ—Ç –≤—Å–µ —á—Ç–æ –≤ –∑–≤–µ–∑–¥–æ—á–∫–∞—Ö: *sigh*, *laugh*, *–ª—é–±–æ–π —Ç–µ–∫—Å—Ç*
var cleanedText = Regex.Replace(text, @"\*[^*]*\*", "");
```

**–ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã:**
- `"Hello *sigh* world"` ‚Üí `"Hello world"`
- `"*laugh* that's funny *giggle*"` ‚Üí `"that's funny"`
- `"*any text in asterisks*"` ‚Üí `""`

#### **IsOnlyEmotionalMarkers(string text)**
```csharp
// –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ —Ç–µ–∫—Å—Ç —Ç–æ–ª—å–∫–æ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã
return string.IsNullOrWhiteSpace(CleanEmotionalMarkers(text));
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- `"*sigh*"` ‚Üí `true` (—Ç–æ–ª—å–∫–æ –º–∞—Ä–∫–µ—Ä)
- `"Hello *sigh*"` ‚Üí `false` (–µ—Å—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç)

---

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏

### **–≠—Ç–∞–ø 1: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–∏**
```csharp
private void OnStreamingTextRecognized(string text, double confidence)
{
    // –û—á–∏—â–∞–µ–º —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    var cleanText = AdvancedSpeechFilter.CleanEmotionalMarkers(text);
    if (string.IsNullOrWhiteSpace(cleanText))
    {
        LogMessage($"üö´ –ü—Ä–æ–ø—É—â–µ–Ω —Ç–µ–∫—Å—Ç —Å —Ç–æ–ª—å–∫–æ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –º–∞—Ä–∫–µ—Ä–∞–º–∏: {text}");
        return;
    }
    
    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∏ –ø–µ—Ä–µ–≤–æ–¥–∏–º —Ç–æ–ª—å–∫–æ –æ—á–∏—â–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
    txtRecognizedText.Text += cleanText;
    TranslateStreamingText(cleanText);
}
```

### **–≠—Ç–∞–ø 2: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Ñ–∏–ª—å—Ç—Ä–µ**
```csharp
// –£—Ä–æ–≤–µ–Ω—å 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —á–∏—Å—Ç–æ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã
if (IsOnlyEmotionalMarkers(cleanText))
{
    AudioAnalysisUtils.SafeDebugLog($"üö´ [L6] –¢–æ–ª—å–∫–æ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã: '{text}'");
    return false;
}
```

---

## üé¨ –ü—Ä–∏–º–µ—Ä—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏

### **–í—Ö–æ–¥–Ω–æ–π —Ç–µ–∫—Å—Ç –æ—Ç Whisper:**
```
"Hello there *sigh* how are you doing *laugh* today?"
```

### **–û–±—Ä–∞–±–æ—Ç–∫–∞:**
1. **–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ**: `OnStreamingTextRecognized()` –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç
2. **–û—á–∏—Å—Ç–∫–∞**: `CleanEmotionalMarkers()` ‚Üí `"Hello there how are you doing today?"`
3. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**: –í UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—á–∏—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
4. **–ü–µ—Ä–µ–≤–æ–¥**: Google Translate –ø–æ–ª—É—á–∞–µ—Ç `"Hello there how are you doing today?"`
5. **TTS**: –ü—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç—Å—è `"–ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞ —Å–µ–≥–æ–¥–Ω—è?"` –±–µ–∑ –ª–∏—à–Ω–∏—Ö –∑–≤—É–∫–æ–≤

### **–ü–æ–ª–Ω–æ—Å—Ç—å—é –º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç:**
```
"*sigh* *cough* *breathing*"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω, –Ω–∏—á–µ–≥–æ –Ω–µ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –∏ –Ω–µ –ø—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç—Å—è.

---

## üÜö –î–æ –∏ –ü–æ—Å–ª–µ

### **–î–û (–ø—Ä–æ–±–ª–µ–º–∞):**
- –í—Ö–æ–¥–Ω–æ–π —Ç–µ–∫—Å—Ç: `"Hello *sigh* world"`
- TTS –ø—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç: `"–ü—Ä–∏–≤–µ—Ç –∑–≤—ë–∑–¥–æ—á–∫–∞ —Å–∞–π–Ω –∑–≤—ë–∑–¥–æ—á–∫–∞ –º–∏—Ä"`
- ‚ùå –ù–µ–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–≤—É—á–∞–Ω–∏–µ

### **–ü–û–°–õ–ï (—Ä–µ—à–µ–Ω–∏–µ):**
- –í—Ö–æ–¥–Ω–æ–π —Ç–µ–∫—Å—Ç: `"Hello *sigh* world"`
- –û—á–∏—â–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç: `"Hello world"`
- TTS –ø—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç: `"–ü—Ä–∏–≤–µ—Ç –º–∏—Ä"`
- ‚úÖ –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–≤—É—á–∞–Ω–∏–µ

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### **–†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ:**
```csharp
@"\*[^*]*\*"
```
- `\*` - –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å–æ –∑–≤–µ–∑–¥–æ—á–∫–∏
- `[^*]*` - –ª—é–±—ã–µ —Å–∏–º–≤–æ–ª—ã –∫—Ä–æ–º–µ –∑–≤–µ–∑–¥–æ—á–∫–∏ (—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ)
- `\*` - –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –∑–≤–µ–∑–¥–æ—á–∫–æ–π

### **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```
üßπ –û—á–∏—â–µ–Ω –æ—Ç –º–∞—Ä–∫–µ—Ä–æ–≤: 'Hello *sigh* world' ‚Üí 'Hello world'
üö´ –ü—Ä–æ–ø—É—â–µ–Ω —Ç–µ–∫—Å—Ç —Å —Ç–æ–ª—å–∫–æ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –º–∞—Ä–∫–µ—Ä–∞–º–∏: *sigh*
üö´ [L6] –¢–æ–ª—å–∫–æ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã: '*laugh* *cough*'
```

### **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- ‚ö° –†–µ–≥–µ–∫—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∑–≤–µ–∑–¥–æ—á–µ–∫
- ‚ö° –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ—á–∏—Å—Ç–∫–∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è (–±—ã—Å—Ç—Ä—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏)
- ‚ö° –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

---

## üéØ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –º–∞—Ä–∫–µ—Ä–æ–≤

### **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —ç–º–æ—Ü–∏–∏:**
- `*sigh*` - –≤–∑–¥–æ—Ö
- `*laugh*` - —Å–º–µ—Ö  
- `*cough*` - –∫–∞—à–µ–ª—å
- `*whisper*` - —à–µ–ø–æ—Ç
- `*shout*` - –∫—Ä–∏–∫

### **–î—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ –∑–≤—É–∫–∏:**
- `*breath*` - –¥—ã—Ö–∞–Ω–∏–µ
- `*breathing*` - –¥—ã—Ö–∞–Ω–∏–µ
- `*gasp*` - –∑–∞–¥—ã—Ö–∞–Ω–∏–µ

### **–°–ª–æ–∂–Ω—ã–µ —ç–º–æ—Ü–∏–∏:**
- `*crying*` - –ø–ª–∞—á
- `*sobbing*` - –≤—Å—Ö–ª–∏–ø—ã–≤–∞–Ω–∏–µ  
- `*giggle*` - —Ö–∏—Ö–∏–∫–∞–Ω—å–µ
- `*yawn*` - –∑–µ–≤–æ–∫

### **–õ—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –º–∞—Ä–∫–µ—Ä:**
- `*–ª—é–±–æ–π —Ç–µ–∫—Å—Ç –≤ –∑–≤–µ–∑–¥–æ—á–∫–∞—Ö*`
- `*–¥–∞–∂–µ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏ –∏ —Å–∏–º–≤–æ–ª–∞–º–∏!*`
- `*123 —á–∏—Å–ª–∞ —Ç–æ–∂–µ*`

---

## üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–∏—è

### **–ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- [ ] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ —Å–ø–∏—Å–∫–∏ –º–∞—Ä–∫–µ—Ä–æ–≤
- [ ] –ó–∞–º–µ–Ω–∞ –º–∞—Ä–∫–µ—Ä–æ–≤ –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤: `(—Ç–µ–∫—Å—Ç)`, `[—Ç–µ–∫—Å—Ç]`
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ UI

### **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã:**
- [ ] ML-–º–æ–¥–µ–ª—å –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∑–≤—É–∫–æ–≤
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å emotion detection
- [ ] –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –∑–∞–º–µ–Ω–∞ –º–∞—Ä–∫–µ—Ä–æ–≤

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

### **–î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ü–µ–ª–∏:**
1. ‚úÖ **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞** "–∑–≤—ë–∑–¥–æ—á–∫–∞ —Å–∞–π–Ω –∑–≤—ë–∑–¥–æ—á–∫–∞"
2. ‚úÖ **–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–≤—É—á–∞–Ω–∏–µ** TTS –±–µ–∑ –ª–∏—à–Ω–∏—Ö –º–∞—Ä–∫–µ—Ä–æ–≤
3. ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–º—ã—Å–ª–∞** - —Ä–µ–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –æ—Å—Ç–∞–µ—Ç—Å—è
4. ‚úÖ **–ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ª—é–±—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤ –≤ `*`
5. ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç

### **–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- üéµ **TTS –∫–∞—á–µ—Å—Ç–≤–æ**: –ß–∏—Å—Ç–∞—è —Ä–µ—á—å –±–µ–∑ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
- üéØ **–¢–æ—á–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–≤–æ–¥–∞**: –ü–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–º—ã—Å–ª–æ–≤–æ–π —Ç–µ–∫—Å—Ç  
- üëÅÔ∏è **UI —á–∏—Å—Ç–æ—Ç–∞**: –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —á–∏—Ç–∞–µ–º—ã–π —Ç–µ–∫—Å—Ç
- üîß **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª—é–±—ã—Ö `*–º–∞—Ä–∫–µ—Ä–æ–≤*`

**–î–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 17 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –°–æ–±—Ä–∞–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é