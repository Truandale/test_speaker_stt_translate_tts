# üåä –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å—Ç—Ä–∏–º–∏–Ω–≥—É –≤ test_speaker_stt_translate_tts

## ‚ú® –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

–í –ø—Ä–æ–µ–∫—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Whisper.NET –∏ —Å–∫–æ–ª—å–∑—è—â–µ–≥–æ –æ–∫–Ω–∞.

## üîß –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. StreamingWhisperProcessor
–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏:
- **–°–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ**: 6 —Å–µ–∫—É–Ω–¥ —Å —à–∞–≥–æ–º 1 —Å–µ–∫—É–Ω–¥–∞ –∏ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ–º 0.5 —Å–µ–∫
- **VAD (Voice Activity Detection)**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è**: –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π –≤ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ö
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏**: Whisper –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–µ–∫—Å—Ç –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç

### 2. AudioResampler
–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ—Å—ç–º–ø–ª–µ—Ä –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∞—É–¥–∏–æ:
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—Å—ç–º–ø–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ 16kHz –º–æ–Ω–æ (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è Whisper)
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤**: 16/24/32-bit PCM –∏ Float32
- **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∫–∞–Ω–∞–ª–æ–≤**: –°—Ç–µ—Ä–µ–æ ‚Üí –º–æ–Ω–æ —Å —É—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ–º
- **Fallback –∫ –ª–∏–Ω–µ–π–Ω–æ–º—É —Ä–µ—Å—ç–º–ø–ª–∏–Ω–≥—É** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ MediaFoundation

## üöÄ –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

### –ü–æ—Ç–æ–∫–æ–≤—ã–π —Ä–µ–∂–∏–º (–Ω–æ–≤—ã–π)
- **–ö–∞–∫ –≤–∫–ª—é—á–∏—Ç—å**: –í—ã–±–µ—Ä–∏—Ç–µ "‚ö° –ü–æ—Ç–æ–∫–æ–≤—ã–π (–∫–∞–∂–¥—ã–µ 3 —Å–µ–∫)" –≤ ComboBox
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
  - –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –±–µ–∑ –ø–∞—É–∑
  - –ù–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∂–¥—ã–µ 1-3 —Å–µ–∫—É–Ω–¥—ã)
  - –ü–ª–∞–≤–Ω–æ–µ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ —Å–µ–≥–º–µ–Ω—Ç–æ–≤
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- **–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è**: –î–ª–∏–Ω–Ω—ã—Ö —Ä–µ—á–µ–π, –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π, –ø–æ–¥–∫–∞—Å—Ç–æ–≤

### –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º (—Å—Ç–∞—Ä—ã–π)
- **–ö–∞–∫ –≤–∫–ª—é—á–∏—Ç—å**: –í—ã–±–µ—Ä–∏—Ç–µ "üîÑ –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π (–∂–¥–µ—Ç –ø–∞—É–∑—ã)"
- **–ü—Ä–∏–Ω—Ü–∏–ø**: –ñ–¥–µ—Ç –ø–∞—É–∑—ã –≤ —Ä–µ—á–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–≥–æ –∞—É–¥–∏–æ
- **–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è**: –ö–æ—Ä–æ—Ç–∫–∏—Ö —Ñ—Ä–∞–∑, –¥–∏–∞–ª–æ–≥–æ–≤

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –º–µ—Ç–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∞—è:
- **–û–∫–æ–Ω**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∞—É–¥–∏–æ-–æ–∫–æ–Ω
- **–û—á–µ—Ä–µ–¥—å**: –†–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É
- **–ë—É—Ñ–µ—Ä**: –ó–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å –∫–æ–ª—å—Ü–µ–≤–æ–≥–æ –±—É—Ñ–µ—Ä–∞
- **–í—Ä–µ–º—è**: –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–Ω–æ–≥–æ –æ–∫–Ω–∞ –≤ –º—Å

## ‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∫–æ–ª—å–∑—è—â–µ–≥–æ –æ–∫–Ω–∞
```
|-------- 6 —Å–µ–∫ --------|
    |-------- 6 —Å–µ–∫ --------|  ‚Üê –ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ 0.5 —Å–µ–∫
        |-------- 6 —Å–µ–∫ --------|
           ‚Üë –®–∞–≥ 1 —Å–µ–∫
```

### –ü–∞–π–ø–ª–∞–π–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏
1. **–ó–∞—Ö–≤–∞—Ç –∞—É–¥–∏–æ** (WASAPI/WaveIn)
2. **–†–µ—Å—ç–º–ø–ª–∏–Ω–≥** ‚Üí 16kHz –º–æ–Ω–æ
3. **–ö–æ–ª—å—Ü–µ–≤–æ–π –±—É—Ñ–µ—Ä** ‚Üí –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –æ–∫–æ–Ω
4. **VAD** ‚Üí –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
5. **Whisper.NET** ‚Üí –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
6. **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è** ‚Üí –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–æ–≤
7. **–ü–µ—Ä–µ–≤–æ–¥** ‚Üí Google Translate
8. **TTS** ‚Üí –°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞—Ö–≤–∞—Ç –∞—É–¥–∏–æ
- **–°–µ–º–∞—Ñ–æ—Ä—ã**: –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏**: Whisper –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–µ–∫—Å—Ç
- **–£–º–Ω–æ–µ VAD**: –ò—Å–∫–ª—é—á–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É —Ç–∏—à–∏–Ω—ã

## üéõÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –≤ –∫–æ–¥–µ)

### StreamingWhisperProcessor.cs
```csharp
private const int WINDOW_DURATION_SEC = 6;       // –î–ª–∏–Ω–∞ –æ–∫–Ω–∞
private const int STEP_DURATION_SEC = 1;         // –®–∞–≥ –º–µ–∂–¥—É –æ–∫–Ω–∞–º–∏  
private const float OVERLAP_SEC = 0.5f;          // –ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ
private const int MIN_AUDIO_LENGTH_SEC = 2;      // –ú–∏–Ω–∏–º—É–º –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
private const float VAD_THRESHOLD = 0.01f;       // –ü–æ—Ä–æ–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
```

### AudioResampler.cs
```csharp
private const int TARGET_SAMPLE_RATE = 16000;    // –¶–µ–ª–µ–≤–∞—è —á–∞—Å—Ç–æ—Ç–∞
private const int TARGET_CHANNELS = 1;           // –ú–æ–Ω–æ
```

## üîÑ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
2. **–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º**: "‚ö° –ü–æ—Ç–æ–∫–æ–≤—ã–π (–∫–∞–∂–¥—ã–µ 3 —Å–µ–∫)"
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —è–∑—ã–∫–∏**: –ò—Å—Ö–æ–¥–Ω—ã–π –∏ —Ü–µ–ª–µ–≤–æ–π
4. **–ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –∑–∞—Ö–≤–∞—Ç"**
5. **–ì–æ–≤–æ—Ä–∏—Ç–µ**: –¢–µ–∫—Å—Ç –±—É–¥–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
6. **–ù–∞–±–ª—é–¥–∞–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É**: –í –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏
–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –Ω–∏–∂–Ω–µ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ:
- `üîß` - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- `üé§` - –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
- `‚è±Ô∏è` - –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- `‚ùå` - –û—à–∏–±–∫–∏

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
1. **Whisper –º–æ–¥–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞**: –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `ggml-small.bin` –≤ –ø–∞–ø–∫–µ `models/whisper/`
2. **–ù–µ—Ç –∑–≤—É–∫–∞**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –∞—É–¥–∏–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
3. **–ú–µ–¥–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –°–Ω–∏–∑—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ –º–æ–¥–µ–ª–∏ Whisper
4. **–î—É–±–ª–∏–∫–∞—Ç—ã —Ç–µ–∫—Å—Ç–∞**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –º–∏–∫—Ä–æ—Ñ–æ–Ω
- –ì–æ–≤–æ—Ä–∏—Ç–µ —á–µ—Ç–∫–æ —Å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –≥—Ä–æ–º–∫–æ—Å—Ç—å—é
- –ò–∑–±–µ–≥–∞–π—Ç–µ —Ñ–æ–Ω–æ–≤–æ–≥–æ —à—É–º–∞
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ—Ä–æ–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≥–æ–ª–æ—Å–∞

### –î–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–¥–µ–ª—å `ggml-base.bin` –≤–º–µ—Å—Ç–æ `ggml-small.bin`
- –£–≤–µ–ª–∏—á—å—Ç–µ —à–∞–≥ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ 2-3 —Å–µ–∫—É–Ω–¥
- –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –æ–∫–Ω–∞ –¥–æ 4-5 —Å–µ–∫—É–Ω–¥

## üöÄ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ VAD –Ω–∞ –æ—Å–Ω–æ–≤–µ ML
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ GPU —É—Å–∫–æ—Ä–µ–Ω–∏—è –¥–ª—è Whisper
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ UI
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–≤
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ–±–ª–∞—á–Ω—ã–º–∏ STT —Å–µ—Ä–≤–∏—Å–∞–º–∏

---

*–°–æ–∑–¥–∞–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã MORT —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏* üé§‚ú®